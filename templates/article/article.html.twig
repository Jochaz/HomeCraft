{% extends 'base.html.twig' %}

{% block title %}HomeCraft : Article {{article.NomArticle}}{% endblock %}

{% block body %}
{% set qteArticle = 1 %}
<div class="container-fluid" id="container-article" style="padding-top:20px; width:100%; min-height:600px">
    <div class="jumbotron" style="width:70%; float:left; padding:20px; margin-right: 10px">
        <h1 class="display-3">{{article.NomArticle}}</h1>
        <p class="lead">Cette article appartient à la catégorie <a href="{{ path('categorie_article_listing', {'id': article.CategorieArticle|first.id}) }}">{{article.CategorieArticle|first.Nom}}</a>. Nous 
           avons ajouté cette article le {{ article.createdAt | date('d/m/Y')}}</p>
        <hr class="my-4">
        {% if article.Photo|length != 0 %} 
            <img src="data:image/jpg;base64,{{article.Photo|first.PhotoArticle}}" width="350px" height="350px" style="float:left; padding-right:10px"/>
        {% else %}
            <img src="http://placehold.it/350x350" alt="" style="float:left; padding-right:10px">
        {% endif %}  
        <div id="description">
            <p>Description : <br/> {{article.DescriptionArticle}}</p>
        </div>
    </div>
    <div class="card text-white bg-primary" style="max-width:450px; margin-top:50px;">
            <div class="card-header" style="font-weight:bold;">PANIER <i class="fa fa-shopping-basket"></i></div>
                <form action="{{path('AjoutPanier')}}" method="post">
                    <div id="prix" style="margin:auto; text-align:center; padding-top:10px;">
                        <h4>{{article.NomArticle}}</h4>
                        <p class="display-7">Prix de l'article : {{article.PrixUnitaireTTC}}€</p>
                    </div>
                    <div id="quantite" style="padding-bottom:10px"> 
                        <input type="hidden" name="idArticle" />
                        <input class="form-control form-control-sm" type="number" placeholder="Quantité" id="qte" name="qte" min="1" max="100" value="1" style="margin:auto; width:20%; text-align:center"> 
                    </div>
                    <div class="card-body" style="margin:auto; text-align:center; padding-top:10px">
                        {% if app.user %}
                        <button type="submit" class="btn btn-success">Ajouter au panier</button>
                        {% else %}
                        <p>Veuillez vous connecter pour ajouter cet article dans votre panier</p> 
                        {% endif %}
                    </div>
                </form>
            </div>
    </div>
</div>

<script>
    document.querySelector('[name=idArticle]').value = {{article.id}};
    document.querySelector('[name=qte]').value = document.getElementById("qte").value;
</script>

{% endblock %}